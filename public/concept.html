<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ä¸€é¡µçº¸å¤ä¹ é¡µ Â· é€šç”¨æ¦‚å¿µæ¨¡æ¿ï¼ˆæ”¯æŒ JSON æ‰¹é‡å¯¼å…¥ & å·¦å³æ»‘åŠ¨ï¼‰</title>
  <style>
    /* ===== ä¸»é¢˜ä¸æ‰“å°è®¾ç½® ===== */
    :root{
      --primary:#2563eb;   /* é»˜è®¤è“ï¼šç§‘æŠ€ */
      --accent:#10b981;    /* é»˜è®¤ç»¿ï¼šé«˜è´¨é‡/å¯æŒç»­ */
      --muted:#6b7280;     /* ç°ï¼šè¾…åŠ© */
      --bg:#f8fafc;        /* èƒŒæ™¯æµ…è‰² */
      --ink:#0f172a;       /* æ–‡å­—ä¸»è‰² */
      --card:#ffffff;      /* å¡ç‰‡åº•è‰² */
      --border:#e5e7eb;    /* è¾¹æ¡†è‰² */
    }

    @page { size: A4; margin: 12mm; }
    @media print {
      body { background: #fff !important; }
      .app-toolbar, .carousel-nav, .importer { display: none !important; }
      .slides { gap: 0; }
      .slide { box-shadow: none; margin: 0 0 16px 0; page-break-after: always; }
      .slide:last-child { page-break-after: auto; }
    }

    /* ===== é¡µé¢ä¸å¸ƒå±€ ===== */
    html, body { height: 100%; }
    body{
      margin:0; padding:0; background: var(--bg); color: var(--ink);
      /* Apple Fontï¼šé‡‡ç”¨ç³»ç»Ÿ SF å­—ä½“æ— */
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "SF Pro Display", "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
    }

    .app-toolbar{
      position: sticky; top: 0; z-index: 50; background: rgba(248,250,252,.8);
      backdrop-filter: saturate(120%) blur(6px);
      border-bottom: 1px solid var(--border); padding: 10px 14px; display:flex; gap:8px; align-items:center; flex-wrap: wrap;
    }
    .app-toolbar .btn{
      border:1px solid var(--border); background:#fff; border-radius:10px; padding:8px 12px; cursor:pointer; font-size:13px;
    }

    .importer{ display:flex; flex-wrap:wrap; gap:8px; align-items:center; margin-left:auto; }
    .importer textarea{ width: 360px; height: 90px; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; font-size:12px; padding:8px; border:1px solid var(--border); border-radius:8px; background:#fff; }

    .viewport{ width:100%; overflow:hidden; }

    .slides{
      display:flex; gap: 18px; padding: 16px; scroll-behavior: smooth;
      /* å…è®¸é¼ æ ‡æ‹–åŠ¨æ»šåŠ¨ */
    }

    .slide{
      flex: 0 0 auto; width: 210mm; min-height: 297mm; background: var(--card);
      border:1px solid var(--border); border-radius: 12px; box-shadow: 0 10px 30px rgba(15,23,42,0.08);
      display: grid; grid-template-rows: auto 1fr auto; overflow: hidden; position: relative;
    }

    /* é¡¶éƒ¨æ ‡é¢˜åŒº */
    header{
      padding: 16px 18px 8px 18px; border-bottom: 1px solid var(--border);
      display: grid; grid-template-columns: 1fr auto; align-items: end; gap: 12px;
    }
    .titleblock h1{ margin:0; font-size: 22px; letter-spacing: .2px; font-weight: 700; }
    .titleblock p{ margin:6px 0 0 0; color: var(--muted); font-size: 12.5px; }
    .badges { display:flex; gap:8px; align-items:center; }
    .badge{ font-size:11px; border:1px solid var(--border); padding:4px 8px; border-radius:20px; color:#334155; }

    /* ä¸»ä½“ï¼šA4 å†…éƒ¨ç½‘æ ¼å¸ƒå±€ */
    .content{
      padding: 14px 18px 18px 18px;
      display: grid;
      grid-template-areas:
        "def def"
        "ele feat"
        "model model"
        "mis ex"
        "quiz quiz";
      grid-template-columns: 1fr 1fr;
      grid-template-rows: auto auto auto auto auto;
      gap: 10px 12px;
    }
    .card{ background: #fff; border:1px solid var(--border); border-radius: 12px; padding: 12px; }
    .card h2{ margin:0 0 8px 0; font-size: 14.5px; letter-spacing:.2px; font-weight: 700; }
    .muted{ color: var(--muted); }

    /* åŒºå—å®šä½ */
    .def    { grid-area: def; text-align: center; background: linear-gradient(180deg, color-mix(in oklab, var(--primary), #fff 85%), #fff 92%); }
    .ele    { grid-area: ele; }
    .feat   { grid-area: feat; }
    .model  { grid-area: model; }
    .ex     { grid-area: ex; }
    .mis    { grid-area: mis; }
    .quiz   { grid-area: quiz; }

    /* æ ¸å¿ƒå®šä¹‰ */
    .def .one-liner{ font-weight: 800; font-size: 19px; line-height: 1.25; }
    .def .subtitle { margin-top:6px; font-size:12px; color: var(--muted); }

    /* æ ¸å¿ƒè¦ç´ ï¼ˆæ€ç»´å¯¼å›¾é£ï¼‰ */
    .mindmap{ display:grid; grid-template-columns: 1fr 1fr; gap:10px; }
    .node{ border:1px dashed color-mix(in oklab, var(--primary), #fff 70%); border-radius:10px; padding:8px; background:#fff; }
    .node .k{ font-weight:600; font-size:12.5px; }
    .node .d{ font-size:12px; color:#475569; margin-top:2px; }

    /* ä¸»è¦ç‰¹å¾ï¼ˆå¯¹æ¯”è¡¨ï¼‰ */
    .table{ width:100%; border-collapse: collapse; font-size:12px; }
    .table th, .table td{ border: 1px solid var(--border); padding:6px 8px; vertical-align: top; }
    .table th{ background: color-mix(in oklab, var(--accent), #fff 85%); text-align:left; }

    /* å¯è§†åŒ–æ¨¡å‹ï¼ˆæµç¨‹å›¾ SVG è‡ªé€‚åº”ï¼‰ */
    .flowwrap{ width:100%; height: 150px; border:1px solid var(--border); border-radius:10px; display:grid; place-items:center; }
    .flowwrap svg{ width:98%; height:140px; }
    .box{ fill:#fff; stroke: color-mix(in oklab, var(--primary), #000 10%); stroke-width:1; rx:8; }
    .arrow{ stroke:#334155; stroke-width:1.5; marker-end: url(#arrowhead); fill:none; }
    .label{ font-size:11px; fill:#0f172a; }

    /* å…¸å‹æ¡ˆä¾‹ */
    .examples{ display:grid; grid-template-columns: 1fr; gap:8px; }
    .exitem{ border:1px solid var(--border); border-radius:10px; padding:8px; }
    .exitem b{ font-size:12.5px; }
    .tags{ display:flex; flex-wrap:wrap; gap:6px; margin-top:6px; }
    .tag{ border:1px solid var(--border); border-radius:999px; padding:2px 8px; font-size:11px; color:#334155; }

    /* å¸¸è§è¯¯åŒº */
    .mistakes{ display:grid; gap:8px; }
    .misitem{ display:grid; grid-template-columns: 26px 1fr; gap:8px; align-items:start; }
    .misitem .x{ font-weight:900; font-size:18px; color:#dc2626; }
    .misitem .ok{ font-weight:800; color: var(--accent); font-size:12px; }

    /* ç»ˆæä¹‹é—® */
    .quizlist{ display:grid; gap:6px; font-size:13px; }
    .quiz .card{ background: linear-gradient(180deg, #fff, color-mix(in oklab, var(--accent), #fff 90%)); }

    /* é¡µè„š */
    footer{ display:flex; justify-content:space-between; align-items:center; padding:10px 18px; border-top:1px solid var(--border); color:#475569; font-size:11.5px; }

    /* è½®æ’­å¯¼èˆª */
    .carousel-nav{ position: fixed; inset: auto 0 12px 0; display:flex; justify-content:center; gap:10px; pointer-events:none; }
    .nav-btn{ pointer-events:auto; border:1px solid var(--border); background:#fff; border-radius:12px; padding:10px 12px; box-shadow: 0 6px 16px rgba(15,23,42,.08); cursor:pointer; }
    .dots{ display:flex; gap:6px; align-items:center; }
    .dot{ width:8px; height:8px; border-radius:50%; background:#cbd5e1; }
    .dot.active{ background: var(--primary); }

    /* å“åº”å¼ï¼ˆéæ‰“å°æ—¶å°å±é¢„è§ˆï¼‰ */
    @media (max-width: 1024px){
      .slide{ width: min(100vw - 24px, 210mm); }
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨å·¥å…·æ ï¼šå¯¼å…¥ JSONã€æ‰“å°ã€å‚è€ƒçº¿ -->
  <div class="app-toolbar">
    <button class="btn" onclick="prevSlide()" title="ä¸Šä¸€å¼ ">â¬…ï¸</button>
    <button class="btn" onclick="nextSlide()" title="ä¸‹ä¸€å¼ ">â¡ï¸</button>
    <button class="btn" onclick="window.print()" title="æ‰“å°å…¨éƒ¨">ğŸ–¨ï¸ æ‰“å°</button>
    <button class="btn" onclick="toggleGuides()" title="åˆ‡æ¢å‚è€ƒçº¿">ğŸ§­ å‚è€ƒçº¿</button>

    <div class="importer">
      <input type="file" id="file" accept="application/json" class="btn" title="å¯¼å…¥ JSON æ–‡ä»¶" />
      <textarea id="jsonText" placeholder='åœ¨æ­¤ç²˜è´´ JSON æ•°ç»„â€¦ï¼ˆè§ä¸‹æ–¹ç¤ºä¾‹ï¼‰'></textarea>
      <button class="btn" onclick="appendFromTextarea()">â• è¿½åŠ ç”Ÿæˆ</button>
      <button class="btn" onclick="replaceFromTextarea()">ğŸ§¹ æ¸…ç©ºåç”Ÿæˆ</button>
    </div>
  </div>

  <!-- è½®æ’­è§†å£ -->
  <div class="viewport" id="viewport">
    <div class="slides" id="slides" aria-live="polite"></div>
  </div>

  <!-- è½®æ’­åº•éƒ¨å¯¼èˆª -->
  <div class="carousel-nav">
    <button class="nav-btn" onclick="prevSlide()" title="ä¸Šä¸€å¼ ">â—€ï¸</button>
    <div class="dots" id="dots"></div>
    <button class="nav-btn" onclick="nextSlide()" title="ä¸‹ä¸€å¼ ">â–¶ï¸</button>
  </div>

  <script>
    /* ================= JSON Schemaï¼ˆå¯é€‰å­—æ®µå®¹é”™ï¼‰ =================
    [
      {
        "title": "æ¦‚å¿µåç§°ï¼ˆå¿…å¡«ï¼‰",
        "subtitle": "å‰¯æ ‡é¢˜æˆ–ä¸€å¥è¯è¯´æ˜",
        "version": "v1.0",
        "theme": {"primary":"#2563eb","accent":"#10b981"},
        "definition": {
          "oneLiner": "ä¸€å¥è¯å®šä¹‰",
          "keywords": "å…³é”®è¯ï¼šA Â· B Â· C"
        },
        "elements": [ {"k":"è¦ç´ å","d":"ç®€çŸ­æè¿°"}, ... ],
        "features": {
          "type": "table|bullets",
          "table": [ {"dim":"ç»´åº¦","new":"æ–°è´¨/æœ¬æ¦‚å¿µç‰¹å¾","old":"å¯¹æ¯”å¯¹è±¡"}, ... ],
          "bullets": ["è¦ç‚¹1","è¦ç‚¹2"]
        },
        "model": { "stages": ["é˜¶æ®µ1","é˜¶æ®µ2","é˜¶æ®µ3","ç»“æœ"], "note":"å¯é€‰è¯´æ˜" },
        "examples": [ {"title":"æ¡ˆä¾‹å","desc":"ä¸€å¥è¯","tags":["æŒ‡æ ‡1","æŒ‡æ ‡2"]}, ... ],
        "misconceptions": [ {"wrong":"è¯¯åŒºè¯´æ³•","right":"æ­£ç¡®ç†è§£"}, ... ],
        "quiz": ["é—®é¢˜1","é—®é¢˜2"]
      }
    ]
    ================================================================ */

    const slidesEl = document.getElementById('slides');
    const dotsEl = document.getElementById('dots');
    const fileInput = document.getElementById('file');
    const jsonText = document.getElementById('jsonText');

    const state = { data: [], index: 0, dragging: false, startX: 0, scrollX: 0 };

    fileInput.addEventListener('change', (e)=>{
      const file = e.target.files?.[0]; if(!file) return;
      const reader = new FileReader();
      reader.onload = ()=>{ try{ const arr = JSON.parse(reader.result); appendData(arr); }catch(err){ alert('JSON è§£æå¤±è´¥ï¼š'+err.message); } };
      reader.readAsText(file);
    });

    function appendFromTextarea(){
      const txt = jsonText.value.trim(); if(!txt) return;
      try{ const arr = JSON.parse(txt); appendData(arr); }catch(err){ alert('JSON è§£æå¤±è´¥ï¼š'+err.message); }
    }
    function replaceFromTextarea(){
      const txt = jsonText.value.trim(); if(!txt) return;
      try{ const arr = JSON.parse(txt); replaceData(arr); }catch(err){ alert('JSON è§£æå¤±è´¥ï¼š'+err.message); }
    }

    function replaceData(arr){ state.data = []; slidesEl.innerHTML=''; appendData(arr, true); }
    function appendData(arr, replace=false){
      if(!Array.isArray(arr)) return alert('æ ¹èŠ‚ç‚¹åº”ä¸ºæ•°ç»„');
      arr.forEach(item=>{ state.data.push(item); slidesEl.appendChild(renderSlide(item)); });
      updateDots();
      goTo(state.data.length-1);
    }

    function renderSlide(d){
      // é¢œè‰²ä¸»é¢˜ï¼ˆå¯é€‰ï¼‰
      const primary = d?.theme?.primary || getComputedStyle(document.documentElement).getPropertyValue('--primary');
      const accent  = d?.theme?.accent  || getComputedStyle(document.documentElement).getPropertyValue('--accent');

      const slide = document.createElement('section');
      slide.className = 'slide';
      slide.setAttribute('role','region');
      slide.style.setProperty('--primary', primary);
      slide.style.setProperty('--accent', accent);

      slide.innerHTML = `
        <header>
          <div class="titleblock">
            <h1>ã€${safe(d.title)||'æœªå‘½åæ¦‚å¿µ'}ã€‘æ ¸å¿ƒå¤ä¹ é¡µ</h1>
            <p class="muted">${safe(d.subtitle)||'é«˜åº¦ç»“æ„åŒ– Â· è§†è§‰åŒ– Â· å…³é”®è¯åŒ– Â· ä¸€å¼  A4 è¯´æ¸…æ¥š'}</p>
          </div>
          <div class="badges" aria-label="é¡µç­¾">
            <span class="badge" style="color:${primary}; border-color:${mix(primary)}">Concept</span>
            <span class="badge" style="color:${accent}; border-color:${mix(accent)}">A4</span>
            <span class="badge">${safe(d.version)||'v1.0'}</span>
          </div>
        </header>
        <main class="content">
          <section class="card def">
            <h2>ä¸€å¥è¯å®šä¹‰ | What is it?</h2>
            <div class="one-liner">${safe(d?.definition?.oneLiner) || 'ï¼ˆè¯·åœ¨ JSON çš„ definition.oneLiner å¡«å†™ä¸€å¥è¯å®šä¹‰ï¼‰'}</div>
            <div class="subtitle">${safe(d?.definition?.keywords) || 'å…³é”®è¯ï¼š'}</div>
          </section>

          <section class="card ele">
            <h2>æ ¸å¿ƒè¦ç´  | Key Elements</h2>
            <div class="mindmap">${(d.elements||[]).map(e=>`
              <div class="node"><div class="k">${safe(e.k||'è¦ç´ ')}</div><div class="d">${safe(e.d||'æè¿°')}</div></div>
            `).join('') || emptyHint('åœ¨ elements æ•°ç»„ä¸­æ·»åŠ è¦ç´ ')}</div>
          </section>

          <section class="card feat">
            <h2>ä¸»è¦ç‰¹å¾ | Key Features</h2>
            ${ renderFeatures(d.features) }
          </section>

          <section class="card model">
            <h2>å®ƒæ˜¯å¦‚ä½•è¿ä½œçš„ï¼Ÿ | How it Works</h2>
            <div class="flowwrap">${renderFlow(d?.model?.stages||[])}</div>
            ${ d?.model?.note ? `<div class="muted" style="margin-top:6px;font-size:12px;">${safe(d.model.note)}</div>` : ''}
          </section>

          <section class="card mis">
            <h2>åƒä¸‡åˆ«æé”™ï¼ | Common Misconceptions</h2>
            <div class="mistakes">${(d.misconceptions||[]).map(m=>`
              <div class="misitem"><div class="x">âœ–</div><div><div><b>è¯¯åŒºï¼š</b>${safe(m.wrong||'â€”')}</div><div class="ok">âœ… æ­£è§£ï¼š${safe(m.right||'â€”')}</div></div></div>
            `).join('') || emptyHint('åœ¨ misconceptions æ•°ç»„ä¸­æ·»åŠ è¯¯åŒº')}</div>
          </section>

          <section class="card ex">
            <h2>ç°å®æ¡ˆä¾‹ | Real-World Examples</h2>
            <div class="examples">${(d.examples||[]).map(ex=>`
              <div class="exitem"><b>${safe(ex.title||'æ¡ˆä¾‹')}</b>
                <div class="muted">${safe(ex.desc||'ä¸€å¥è¯è¯´æ˜')}</div>
                <div class="tags">${(ex.tags||[]).map(t=>`<span class="tag">${safe(t)}</span>`).join('')}</div>
              </div>`).join('') || emptyHint('åœ¨ examples æ•°ç»„ä¸­æ·»åŠ æ¡ˆä¾‹')}</div>
          </section>

          <section class="card quiz">
            <h2>é—®é—®ä½ è‡ªå·± | Test Yourself</h2>
            <div class="quizlist">${(d.quiz||[]).map((q,i)=>`<div>${i+1}. ${safe(q)}</div>`).join('') || emptyHint('åœ¨ quiz æ•°ç»„ä¸­æ·»åŠ é—®é¢˜')}</div>
          </section>
        </main>
        <footer>
          <div>æ¨¡æ¿ï¼šç»“æ„åŒ– Â· è§†è§‰åŒ– Â· å…³é”®è¯åŒ–ï½œä¸»é¢˜è‰²â‰¤3ï¼Œå­—ä½“â‰¤2ï¼ˆApple Font ä¼˜å…ˆï¼‰</div>
          <div>ç”Ÿæˆæ—¥æœŸï¼š<span class="today"></span></div>
        </footer>
      `;

      // å¡«å……æ—¥æœŸ
      slide.querySelector('.today').textContent = todayStr();
      return slide;
    }

    function renderFeatures(f){
      if(!f) return `<div class="muted">${emptyHint('features æœªæä¾›')}</div>`;
      if(f.type === 'bullets'){
        const bullets = (f.bullets||[]).map(x=>`<div>â€¢ ${safe(x)}</div>`).join('');
        return `<div style="font-size:12.5px; display:grid; gap:6px;">${bullets || emptyHint('æ·»åŠ  bullets')}</div>`;
      }
      // é»˜è®¤ï¼šè¡¨æ ¼
      const rows = (f.table||[]).map(r=>`<tr><td>${safe(r.dim||'ç»´åº¦')}</td><td>${safe(r.new||'æ–°ç‰¹å¾')}</td><td>${safe(r.old||'å¯¹æ¯”')}</td></tr>`).join('');
      return `<table class="table"><thead><tr><th>ç»´åº¦</th><th>æœ¬æ¦‚å¿µ</th><th>å¯¹æ¯”/ä¼ ç»Ÿ</th></tr></thead><tbody>${rows || '<tr><td colspan="3">'+emptyHint('æ·»åŠ  table è¡Œ')+'</td></tr>'}</tbody></table>`;
    }

    function renderFlow(stages){
      if(!stages.length){ return `<div class="muted" style="font-size:12px;">${emptyHint('åœ¨ model.stages ä¸­ç»™å‡ºæµç¨‹é˜¶æ®µ')}</div>`; }
      // ç”Ÿæˆç®€æ˜“æ°´å¹³æµç¨‹å›¾ SVG
      const w = 800, h = 140; const pad = 30; const boxW = Math.max(120, Math.min(180, (w - pad*2) / stages.length - 10));
      const boxH = 40; const gap = ((w - pad*2) - boxW*stages.length) / (stages.length - 1 || 1);
      const defs = `<defs><marker id="arrowhead" markerWidth="8" markerHeight="6" refX="6" refY="3" orient="auto"><polygon points="0 0, 6 3, 0 6"></polygon></marker></defs>`;
      let rects = '', arrows = '', labels = '';
      stages.forEach((s, i)=>{
        const x = pad + i*(boxW+gap); const y = (h-boxH)/2;
        rects += `<rect class="box" x="${x}" y="${y}" width="${boxW}" height="${boxH}" rx="8"/>`;
        labels += `<text class="label" x="${x+10}" y="${y+25}">${escapeHtml(String(s))}</text>`;
        if(i < stages.length-1){ const nx = pad + (i+1)*(boxW+gap); const midY = y + boxH/2; arrows += `<line class="arrow" x1="${x+boxW}" y1="${midY}" x2="${nx}" y2="${midY}"/>`; }
      });
      return `<svg viewBox="0 0 ${w} ${h}">${defs}${rects}${arrows}${labels}</svg>`;
    }

    function updateDots(){
      dotsEl.innerHTML = '';
      for(let i=0;i<state.data.length;i++){
        const d = document.createElement('div'); d.className='dot'+(i===state.index?' active':''); d.onclick=()=>goTo(i); dotsEl.appendChild(d);
      }
    }

    function goTo(i){
      state.index = Math.max(0, Math.min(state.data.length-1, i));
      const slideEl = slidesEl.children[state.index]; if(!slideEl) return;
      slideEl.scrollIntoView({behavior:'smooth', inline:'center'});
      updateDots();
    }
    function prevSlide(){ goTo(state.index-1); }
    function nextSlide(){ goTo(state.index+1); }

    // é”®ç›˜ä¸è§¦æ§åˆ‡æ¢
    document.addEventListener('keydown', (e)=>{ if(e.key==='ArrowLeft') prevSlide(); if(e.key==='ArrowRight') nextSlide(); });
    const viewport = document.getElementById('viewport');
    viewport.addEventListener('touchstart', (e)=>{ state.dragging=true; state.startX=e.touches[0].clientX; });
    viewport.addEventListener('touchmove', (e)=>{ /* é˜»æ­¢å‚ç›´æ»šåŠ¨è§¦å‘ */ });
    viewport.addEventListener('touchend', (e)=>{ if(!state.dragging) return; const dx = e.changedTouches[0].clientX - state.startX; state.dragging=false; if(Math.abs(dx)>40){ if(dx<0) nextSlide(); else prevSlide(); }});

    // å‚è€ƒçº¿
    function toggleGuides(){
      const on = document.body.dataset.guides === 'on';
      document.body.dataset.guides = on ? 'off' : 'on';
      document.querySelectorAll('.card').forEach(c=>{
        c.style.backgroundImage = on ? '' :
          'repeating-linear-gradient(0deg, transparent, transparent 23px, rgba(99,102,241,.06) 24px),\
           repeating-linear-gradient(90deg, transparent, transparent 23px, rgba(99,102,241,.06) 24px)';
        c.style.backgroundSize = '24px 24px, 24px 24px';
      });
    }
    window.toggleGuides = toggleGuides;

    // å·¥å…·å‡½æ•°
    function safe(s){ return s==null? '' : escapeHtml(String(s)); }
    function escapeHtml(str){ return str.replace(/[&<>"']/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m])); }
    function mix(c){ return `color-mix(in oklab, ${c}, #fff 60%)`; }
    function todayStr(){ const d=new Date(); return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`; }
    function emptyHint(msg){ return `<div class="muted" style="font-size:12px;">ï¼ˆ${escapeHtml(msg)}ï¼‰</div>`; }

    // åˆå§‹åŒ–ï¼šæ”¾å…¥ä¸€ä¸ªç©ºç™½æ¨¡æ¿ + ç¤ºä¾‹â€œæ–°è´¨ç”Ÿäº§åŠ›â€
    const demo = [
      {
        title: "ç©ºç™½æ¨¡æ¿",
        subtitle: "æŠŠä½ çš„ JSON ç²˜è´´åï¼Œç‚¹å‡»â€œè¿½åŠ ç”Ÿæˆâ€æˆ–â€œæ¸…ç©ºåç”Ÿæˆâ€",
        definition: { oneLiner: "ä¸€å¥è¯å®šä¹‰ï¼ˆç¤ºä¾‹ï¼‰", keywords: "å…³é”®è¯ï¼šA Â· B Â· C" },
        elements: [ {k:"è¦ç´ A", d:"ç®€è¿°"}, {k:"è¦ç´ B", d:"ç®€è¿°"}, {k:"è¦ç´ C", d:"ç®€è¿°"} ],
        features: { type:"table", table:[ {dim:"é©±åŠ¨", new:"åˆ›æ–°é©±åŠ¨", old:"æŠ•å…¥é©±åŠ¨"} ] },
        model: { stages:["è¦ç´ ","èƒ½åŠ›","åœºæ™¯","ç»“æœ"], note:"ä½¿ç”¨ model.stages è‡ªåŠ¨ç»˜åˆ¶æµç¨‹å›¾" },
        examples: [ {title:"æ¡ˆä¾‹A", desc:"ä¸€å¥è¯è¯´æ˜", tags:["æŒ‡æ ‡1","æŒ‡æ ‡2"]} ],
        misconceptions: [ {wrong:"å¸¸è§è¯¯è§£", right:"æ­£ç¡®ç†è§£"} ],
        quiz: ["ç”¨ä¸€å¥è¯è§£é‡Šæ­¤æ¦‚å¿µ", "ç»™å‡º 3 ä¸ªè¡¡é‡æŒ‡æ ‡"]
      },
      {
        title: "æ–°è´¨ç”Ÿäº§åŠ›",
        subtitle: "ç»“æ„åŒ–Â·è§†è§‰åŒ–Â·å…³é”®è¯åŒ–",
        version: "v1.0",
        theme: { primary: "#2563eb", accent: "#10b981" },
        definition: {
          oneLiner: "ç”±ç§‘æŠ€åˆ›æ–°ä¸ç»¿è‰²ä½ç¢³é©±åŠ¨ï¼Œé‡æ„è¦ç´ é…ç½®ä¸äº§ä¸šç»„ç»‡ã€å½¢æˆé«˜è´¨é‡ä¸å¯æŒç»­å¢é•¿åŠ¨èƒ½çš„å…ˆè¿›ç”Ÿäº§åŠ›å½¢æ€ã€‚",
          keywords: "é«˜æŠ€æœ¯ Â· é«˜æ•ˆç‡ Â· é«˜è´¨é‡ Â· å¯æŒç»­ Â· ç”Ÿæ€ååŒ"
        },
        elements: [
          {k:"ç§‘æŠ€åˆ›æ–°", d:"AI/å¤§æ¨¡å‹ Â· å…ˆè¿›åˆ¶é€  Â· æ–°ææ–™/èŠ¯ç‰‡ Â· å·¥ä¸šè½¯ä»¶"},
          {k:"æ•°æ®è¦ç´ ", d:"æ•°æ®æ²»ç† Â· æ•°æ®èµ„äº§åŒ– Â· éšç§è®¡ç®—"},
          {k:"äººæ‰ä¸ç»„ç»‡", d:"å¤åˆå‹äººæ‰ Â· æ•æ·ç»„ç»‡ Â· å·¥ç¨‹æ–‡åŒ–"},
          {k:"äº§ä¸šç”Ÿæ€", d:"å¹³å°+é“¾ä¸» Â· ä¸“ç²¾ç‰¹æ–° Â· æ ‡å‡†ä¸æ¥å£"},
          {k:"ç»¿è‰²ä½ç¢³", d:"é£å…‰å‚¨ Â· æ°¢èƒ½ Â· å¾ªç¯ç»æµ Â· LCA"},
          {k:"åˆ¶åº¦ä¸èµ„æœ¬", d:"çŸ¥è¯†äº§æƒ Â· æ ‡å‡†ä½“ç³» Â· ç§‘åˆ›é‡‘è"}
        ],
        features: {
          type: "table",
          table: [
            {dim:"é©±åŠ¨", new:"åˆ›æ–°/æ•°æ®/ç»¿è‰²é©±åŠ¨", old:"è¦ç´ æŠ•å…¥é©±åŠ¨"},
            {dim:"èµ„æº", new:"æ•°æ®ä¸ç®—åŠ›ä¸ºæ ¸å¿ƒ", old:"èµ„æœ¬/åœŸåœ°/åŠ³åŠ¨åŠ›"},
            {dim:"ç»„ç»‡", new:"å¹³å°åŒ–ã€ç”Ÿæ€ååŒ", old:"ç§‘å±‚åŒ–ã€é“¾å¼"}
          ]
        },
        model: { stages:["è¦ç´ æŠ•å…¥","ç§‘æŠ€åˆ›æ–°","æ•°æ®è¦ç´ ","èƒ½åŠ›å¼•æ“","è¿è¥ç³»ç»Ÿ","é«˜è´¨é‡äº§å‡º"], note:"æ•°æ®é—­ç¯ä¸æ ‡å‡†è¿­ä»£" },
        examples: [
          {title:"æ™ºèƒ½åˆ¶é€ å·¥å‚", desc:"æ•°å­—å­ªç”Ÿ+æŸ”æ€§äº§çº¿+è‡ªä¼˜åŒ–", tags:["OEEâ†‘","ä¸è‰¯ç‡â†“","äº¤ä»˜å‘¨æœŸâ†“"]},
          {title:"æºç½‘è·å‚¨ååŒ", desc:"é£å…‰å‚¨ä¸€ä½“åŒ– Â· éœ€æ±‚å“åº”", tags:["LCOEâ†“","ç¢³å¼ºåº¦â†“","ç¨³å®šæ€§â†‘"]}
        ],
        misconceptions: [
          {wrong:"=ä¸Šé©¬æ–°è®¾å¤‡/ä¿¡æ¯åŒ–ç³»ç»Ÿ", right:"æŠ€æœ¯Ã—æ•°æ®Ã—æµç¨‹Ã—ç»„ç»‡çš„ç³»ç»Ÿæ€§é‡æ„"},
          {wrong:"åªä¸äº’è”ç½‘ç›¸å…³", right:"åˆ¶é€ /èƒ½æº/äº¤é€š/æ”¿åŠ¡/å†œä¸šç­‰å‡é€‚ç”¨"}
        ],
        quiz: ["ç”¨ä¸€å¥è¯æè¿°ä½ è¡Œä¸šçš„æ–°è´¨è·¯å¾„ï¼ˆé©±åŠ¨/è¦ç´ /æŒ‡æ ‡ï¼‰", "ç”»å‡ºè¦ç´ â†’èƒ½åŠ›â†’åœºæ™¯â†’ç»“æœé—­ç¯å¹¶ç»™å‡º 3 ä¸ªé‡åŒ–æŒ‡æ ‡"]
      }
    ];

    appendData(demo);
  </script>
</body>
</html>
