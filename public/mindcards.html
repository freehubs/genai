<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>æ€ç»´æ¨¡å‹å¡ç‰‡åº“ - GenAI Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <style>
    .text-gradient {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .mind-model-card {
      background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
      border: 1px solid #e2e8f0;
      transition: all 0.3s ease;
    }
    .mind-model-card:hover {
      background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
      border-color: #cbd5e1;
      transform: translateY(-2px);
      box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
    }
    .difficulty-1 { background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); }
    .difficulty-2 { background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); }
    .difficulty-3 { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); }
    .difficulty-4 { background: linear-gradient(135deg, #fed7aa 0%, #fdba74 100%); }
    .difficulty-5 { background: linear-gradient(135deg, #fecaca 0%, #fca5a5 100%); }
    .tag {
      display: inline-block;
      padding: 0.25rem 0.75rem;
      background: rgba(59, 130, 246, 0.1);
      color: #2563eb;
      border-radius: 9999px;
      font-size: 0.75rem;
      font-weight: 500;
      margin: 0.125rem;
      transition: all 0.2s ease;
    }
    .tag:hover {
      background: rgba(59, 130, 246, 0.2);
      transform: scale(1.05);
    }
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      backdrop-filter: blur(4px);
    }
    .modal.show {
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .modal-content {
      background: white;
      padding: 2rem;
      border-radius: 1rem;
      max-width: 600px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      transform: scale(0.9);
      opacity: 0;
      transition: all 0.3s ease;
    }
    .modal.show .modal-content {
      transform: scale(1);
      opacity: 1;
    }
    .close {
      position: absolute;
      right: 1rem;
      top: 1rem;
      font-size: 1.5rem;
      cursor: pointer;
      color: #6b7280;
      transition: color 0.2s ease;
    }
    .close:hover {
      color: #374151;
    }
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 1.5rem;
    }
    @media (max-width: 640px) {
      .cards-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body class="min-h-screen bg-white text-neutral-900 antialiased">
  <!-- é¡¶æ  -->
  <header class="sticky top-0 z-40 backdrop-blur bg-white/70 border-b border-neutral-100">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center gap-3">
      <div class="flex-1 flex items-center gap-2">
        <a href="/index.html" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
          <div class="w-8 h-8 rounded-2xl bg-gradient-to-r from-blue-500 to-purple-600 text-white grid place-items-center">
            âœ¨
          </div>
          <h1 class="text-xl md:text-2xl font-semibold tracking-tight">GenAI Platform</h1>
        </a>
      </div>
      <div class="flex items-center gap-2">
        <button id="loginBtn" class="rounded-xl border border-neutral-200 bg-white px-3 py-2 text-sm hover:bg-neutral-50 transition-colors">
          ç™»å½•
        </button>
      </div>
    </div>
  </header>

  <!-- ä¸»è¦å†…å®¹ -->
  <main class="mx-auto max-w-6xl px-3 sm:px-4 md:px-6 lg:px-8 py-8">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <section class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-light text-neutral-900 leading-tight tracking-tight mb-4">
        æ€ç»´æ¨¡å‹
        <br />
        <span class="text-gradient font-medium">å¡ç‰‡åº“</span>
      </h1>
      <p class="text-lg text-neutral-600 max-w-2xl mx-auto leading-relaxed font-light">
        æ”¶é›†å’Œæ•´ç†å„ç§æ€ç»´æ¨¡å‹ï¼Œæå‡ä½ çš„æ€è€ƒèƒ½åŠ›å’Œå†³ç­–è´¨é‡
      </p>
    </section>

    <!-- æœç´¢å’Œç­›é€‰ -->
    <section class="mb-8">
      <div class="flex flex-col sm:flex-row gap-4 items-center justify-between">
        <div class="flex-1 max-w-md">
          <div class="relative">
            <input type="text" id="searchInput" placeholder="æœç´¢æ€ç»´æ¨¡å‹..." 
                   class="w-full px-4 py-3 border-2 border-gray-300 rounded-xl pl-12 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20">
            <svg class="absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
        </div>
        <div class="flex gap-2">
          <select id="categoryFilter" class="px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">æ‰€æœ‰åˆ†ç±»</option>
            <option value="å†³ç­–">å†³ç­–</option>
            <option value="åˆ†æ">åˆ†æ</option>
            <option value="åˆ›æ„">åˆ›æ„</option>
            <option value="å­¦ä¹ ">å­¦ä¹ </option>
            <option value="æ²Ÿé€š">æ²Ÿé€š</option>
            <option value="é¢†å¯¼åŠ›">é¢†å¯¼åŠ›</option>
          </select>
          <select id="difficultyFilter" class="px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500">
            <option value="">æ‰€æœ‰éš¾åº¦</option>
            <option value="1">åˆçº§</option>
            <option value="2">ä¸­çº§</option>
            <option value="3">é«˜çº§</option>
            <option value="4">ä¸“å®¶</option>
            <option value="5">å¤§å¸ˆ</option>
          </select>
          <button id="addModelBtn" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-200 font-medium flex items-center gap-2">
            <span>+</span>
            <span class="hidden sm:inline">æ·»åŠ æ¨¡å‹</span>
          </button>
        </div>
      </div>
    </section>

    <!-- æ€ç»´æ¨¡å‹å¡ç‰‡ç½‘æ ¼ -->
    <section class="mb-12">
      <div id="cardsContainer" class="cards-grid">
        <!-- å¡ç‰‡å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
      </div>
      
      <!-- ç©ºçŠ¶æ€ -->
      <div id="emptyState" class="hidden text-center py-16">
        <div class="w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4">
          <span class="text-4xl">ğŸ§ </span>
        </div>
        <h3 class="text-xl font-medium text-gray-900 mb-2">è¿˜æ²¡æœ‰æ€ç»´æ¨¡å‹</h3>
        <p class="text-gray-600 mb-6">å¼€å§‹æ·»åŠ ä½ çš„ç¬¬ä¸€ä¸ªæ€ç»´æ¨¡å‹å§</p>
        <button onclick="openAddModal()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-purple-700 transition-all duration-200 font-medium">
          æ·»åŠ ç¬¬ä¸€ä¸ªæ¨¡å‹
        </button>
      </div>
    </section>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <section class="text-center">
      <div class="inline-flex items-center space-x-8 text-neutral-500 bg-neutral-100 px-6 py-3 rounded-full">
        <div class="flex items-center gap-2">
          <span class="text-lg">ğŸ“š</span>
          <span class="text-sm">æ€»è®¡: <span id="totalCount" class="font-medium">0</span></span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-lg">â­</span>
          <span class="text-sm">æ”¶è—: <span id="favoriteCount" class="font-medium">0</span></span>
        </div>
        <div class="flex items-center gap-2">
          <span class="text-lg">ğŸ”„</span>
          <span class="text-sm">å¾…å¤ä¹ : <span id="reviewCount" class="font-medium">0</span></span>
        </div>
      </div>
    </section>
  </main>

  <!-- é¡µè„š -->
  <footer class="border-t border-neutral-100 bg-neutral-50 mt-20">
    <div class="max-w-6xl mx-auto px-6 py-8">
      <div class="text-center text-neutral-500 text-sm">
        <p>Â© 2024 GenAI Platform. åŸºäº Next.js å’Œ Tailwind CSS æ„å»º</p>
      </div>
    </div>
  </footer>

  <!-- æ·»åŠ /ç¼–è¾‘æ€ç»´æ¨¡å‹æ¨¡æ€æ¡† -->
  <div id="modelModal" class="modal">
    <div class="modal-content relative">
      <span class="close" id="closeModal">&times;</span>
      <div class="text-center mb-6">
        <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
          <span class="text-2xl text-white">ğŸ§ </span>
        </div>
        <h2 class="text-2xl font-semibold text-neutral-900 mb-2" id="modalTitle">æ·»åŠ æ€ç»´æ¨¡å‹</h2>
        <p class="text-neutral-600">å¡«å†™æ¨¡å‹ä¿¡æ¯ï¼Œå¸®åŠ©è®°å¿†å’Œç†è§£</p>
      </div>
      
      <!-- è¡¨å• -->
      <form id="modelForm" class="space-y-4">
        <div>
          <label for="modelTitle" class="block text-sm font-medium text-neutral-700 mb-2">æ¨¡å‹åç§° *</label>
          <input type="text" id="modelTitle" class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ä¾‹å¦‚ï¼šSWOTåˆ†æã€5W1Hæ³•..." required>
        </div>
        
        <div>
          <label for="modelDescription" class="block text-sm font-medium text-neutral-700 mb-2">ç®€çŸ­æè¿°</label>
          <input type="text" id="modelDescription" class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ä¸€å¥è¯æè¿°è¿™ä¸ªæ¨¡å‹...">
        </div>
        
        <div>
          <label for="modelCategory" class="block text-sm font-medium text-neutral-700 mb-2">åˆ†ç±»</label>
          <select id="modelCategory" class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <option value="">é€‰æ‹©åˆ†ç±»</option>
            <option value="å†³ç­–">å†³ç­–</option>
            <option value="åˆ†æ">åˆ†æ</option>
            <option value="åˆ›æ„">åˆ›æ„</option>
            <option value="å­¦ä¹ ">å­¦ä¹ </option>
            <option value="æ²Ÿé€š">æ²Ÿé€š</option>
            <option value="é¢†å¯¼åŠ›">é¢†å¯¼åŠ›</option>
          </select>
        </div>
        
        <div>
          <label for="modelDifficulty" class="block text-sm font-medium text-neutral-700 mb-2">éš¾åº¦ç­‰çº§</label>
          <select id="modelDifficulty" class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            <option value="1">1 - åˆçº§</option>
            <option value="2">2 - ä¸­çº§</option>
            <option value="3">3 - é«˜çº§</option>
            <option value="4">4 - ä¸“å®¶</option>
            <option value="5">5 - å¤§å¸ˆ</option>
          </select>
        </div>
        
        <div>
          <label for="modelTags" class="block text-sm font-medium text-neutral-700 mb-2">æ ‡ç­¾</label>
          <input type="text" id="modelTags" class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ç”¨é€—å·åˆ†éš”å¤šä¸ªæ ‡ç­¾ï¼Œå¦‚ï¼šå†³ç­–,åˆ†æ,å·¥å…·">
        </div>
        
        <div>
          <label for="modelContent" class="block text-sm font-medium text-neutral-700 mb-2">è¯¦ç»†å†…å®¹ *</label>
          <textarea id="modelContent" rows="6" class="w-full px-3 py-2 border border-neutral-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none" placeholder="è¯¦ç»†æè¿°è¿™ä¸ªæ€ç»´æ¨¡å‹ï¼ŒåŒ…æ‹¬ä½¿ç”¨åœºæ™¯ã€æ­¥éª¤ã€æ³¨æ„äº‹é¡¹ç­‰..." required></textarea>
        </div>
        
        <div class="flex items-center justify-between pt-4">
          <button type="button" onclick="closeModal()" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
            å–æ¶ˆ
          </button>
          <button type="submit" id="submitBtn" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white py-2 px-6 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 font-medium">
            <span id="submitBtnText">ä¿å­˜</span>
          </button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // æ¨¡æ‹Ÿæ•°æ®
    let mindModels = [
      {
        id: '1',
        title: 'SWOTåˆ†æ',
        description: 'åˆ†æä¼˜åŠ¿ã€åŠ£åŠ¿ã€æœºä¼šå’Œå¨èƒçš„æˆ˜ç•¥å·¥å…·',
        content: 'SWOTåˆ†ææ˜¯ä¸€ç§æˆ˜ç•¥è§„åˆ’å·¥å…·ï¼Œç”¨äºè¯„ä¼°é¡¹ç›®çš„ä¼˜åŠ¿(Strengths)ã€åŠ£åŠ¿(Weaknesses)ã€æœºä¼š(Opportunities)å’Œå¨èƒ(Threats)ã€‚\n\nä½¿ç”¨æ­¥éª¤ï¼š\n1. åˆ—å‡ºå†…éƒ¨ä¼˜åŠ¿\n2. è¯†åˆ«å†…éƒ¨åŠ£åŠ¿\n3. å‘ç°å¤–éƒ¨æœºä¼š\n4. åˆ†æå¤–éƒ¨å¨èƒ\n\nåº”ç”¨åœºæ™¯ï¼š\n- ä¼ä¸šæˆ˜ç•¥è§„åˆ’\n- é¡¹ç›®è¯„ä¼°\n- ä¸ªäººå‘å±•è§„åˆ’',
        category: 'åˆ†æ',
        difficulty: 1,
        tags: ['åˆ†æ', 'æˆ˜ç•¥', 'è¯„ä¼°'],
        isFavorite: true,
        lastReviewed: '2024-01-15',
        reviewCount: 3
      },
      {
        id: '2',
        title: '5W1Hæ³•',
        description: 'é€šè¿‡å…­ä¸ªé—®é¢˜å…¨é¢åˆ†æé—®é¢˜çš„æ€è€ƒæ–¹æ³•',
        content: '5W1Hæ³•æ˜¯ä¸€ç§ç³»ç»Ÿæ€§çš„é—®é¢˜åˆ†ææ–¹æ³•ï¼Œé€šè¿‡å›ç­”å…­ä¸ªåŸºæœ¬é—®é¢˜æ¥å…¨é¢ç†è§£é—®é¢˜ã€‚\n\nå…­ä¸ªé—®é¢˜ï¼š\n- What: æ˜¯ä»€ä¹ˆï¼Ÿ\n- Why: ä¸ºä»€ä¹ˆï¼Ÿ\n- When: ä»€ä¹ˆæ—¶å€™ï¼Ÿ\n- Where: åœ¨å“ªé‡Œï¼Ÿ\n- Who: æ˜¯è°ï¼Ÿ\n- How: æ€ä¹ˆåšï¼Ÿ\n\nä½¿ç”¨åœºæ™¯ï¼š\n- é—®é¢˜åˆ†æ\n- é¡¹ç›®è§„åˆ’\n- æ–°é—»æŠ¥é“\n- è°ƒæŸ¥ç ”ç©¶',
        category: 'åˆ†æ',
        difficulty: 1,
        tags: ['åˆ†æ', 'é—®é¢˜è§£å†³', 'æ€è€ƒ'],
        isFavorite: false,
        lastReviewed: '2024-01-10',
        reviewCount: 1
      }
    ];

    // é¡µé¢åŠ è½½æ—¶åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', function() {
      renderCards();
      updateStats();
      bindEvents();
    });

    // ç»‘å®šäº‹ä»¶
    function bindEvents() {
      document.getElementById('searchInput').addEventListener('input', handleSearch);
      document.getElementById('categoryFilter').addEventListener('change', handleFilter);
      document.getElementById('difficultyFilter').addEventListener('change', handleFilter);
      document.getElementById('addModelBtn').addEventListener('click', openAddModal);
      document.getElementById('closeModal').addEventListener('click', closeModal);
      document.getElementById('modelForm').addEventListener('submit', handleFormSubmit);
      
      // ç‚¹å‡»æ¨¡æ€æ¡†å¤–éƒ¨å…³é—­
      document.getElementById('modelModal').addEventListener('click', function(e) {
        if (e.target === this) closeModal();
      });
    }

    // æ¸²æŸ“å¡ç‰‡
    function renderCards() {
      const container = document.getElementById('cardsContainer');
      const emptyState = document.getElementById('emptyState');
      
      if (mindModels.length === 0) {
        container.classList.add('hidden');
        emptyState.classList.remove('hidden');
        return;
      }
      
      container.classList.remove('hidden');
      emptyState.classList.add('hidden');
      
      container.innerHTML = mindModels.map(model => `
        <div class="mind-model-card rounded-2xl p-6 cursor-pointer" onclick="viewModel('${model.id}')">
          <div class="flex items-start justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
              <span class="text-2xl">ğŸ§ </span>
            </div>
            <button onclick="event.stopPropagation(); toggleFavorite('${model.id}')" class="text-2xl ${model.isFavorite ? 'text-yellow-500' : 'text-gray-400'} hover:text-yellow-500 transition-colors">
              ${model.isFavorite ? 'â­' : 'â˜†'}
            </button>
          </div>
          
          <h3 class="text-xl font-semibold text-neutral-900 mb-2">${model.title}</h3>
          <p class="text-neutral-600 text-sm mb-4">${model.description}</p>
          
          <div class="flex items-center justify-between mb-4">
            <span class="difficulty-${model.difficulty} px-3 py-1 rounded-full text-xs font-medium">
              éš¾åº¦ ${model.difficulty}
            </span>
            <span class="text-sm text-gray-500">${model.category}</span>
          </div>
          
          <div class="mb-4">
            ${model.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
          </div>
          
          <div class="flex items-center justify-between text-sm text-gray-500">
            <span>å¤ä¹  ${model.reviewCount} æ¬¡</span>
            <span>${formatDate(model.lastReviewed)}</span>
          </div>
        </div>
      `).join('');
    }

    // æœç´¢å¤„ç†
    function handleSearch() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const filteredModels = mindModels.filter(model => 
        model.title.toLowerCase().includes(searchTerm) ||
        model.description.toLowerCase().includes(searchTerm) ||
        model.tags.some(tag => tag.toLowerCase().includes(searchTerm))
      );
      renderFilteredCards(filteredModels);
    }

    // ç­›é€‰å¤„ç†
    function handleFilter() {
      const category = document.getElementById('categoryFilter').value;
      const difficulty = document.getElementById('difficultyFilter').value;
      
      let filteredModels = mindModels;
      
      if (category) {
        filteredModels = filteredModels.filter(model => model.category === category);
      }
      
      if (difficulty) {
        filteredModels = filteredModels.filter(model => model.difficulty === parseInt(difficulty));
      }
      
      renderFilteredCards(filteredModels);
    }

    // æ¸²æŸ“ç­›é€‰åçš„å¡ç‰‡
    function renderFilteredCards(models) {
      const container = document.getElementById('cardsContainer');
      const emptyState = document.getElementById('emptyState');
      
      if (models.length === 0) {
        container.classList.add('hidden');
        emptyState.classList.remove('hidden');
        emptyState.querySelector('h3').textContent = 'æ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„æ¨¡å‹';
        emptyState.querySelector('p').textContent = 'å°è¯•è°ƒæ•´æœç´¢æ¡ä»¶æˆ–ç­›é€‰å™¨';
        return;
      }
      
      container.classList.remove('hidden');
      emptyState.classList.add('hidden');
      
      container.innerHTML = models.map(model => `
        <div class="mind-model-card rounded-2xl p-6 cursor-pointer" onclick="viewModel('${model.id}')">
          <div class="flex items-start justify-between mb-4">
            <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center shadow-lg">
              <span class="text-2xl">ğŸ§ </span>
            </div>
            <button onclick="event.stopPropagation(); toggleFavorite('${model.id}')" class="text-2xl ${model.isFavorite ? 'text-yellow-500' : 'text-gray-400'} hover:text-yellow-500 transition-colors">
              ${model.isFavorite ? 'â­' : 'â˜†'}
            </button>
          </div>
          
          <h3 class="text-xl font-semibold text-neutral-900 mb-2">${model.title}</h3>
          <p class="text-neutral-600 text-sm mb-4">${model.description}</p>
          
          <div class="flex items-center justify-between mb-4">
            <span class="difficulty-${model.difficulty} px-3 py-1 rounded-full text-xs font-medium">
              éš¾åº¦ ${model.difficulty}
            </span>
            <span class="text-sm text-gray-500">${model.category}</span>
          </div>
          
          <div class="mb-4">
            ${model.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
          </div>
          
          <div class="flex items-center justify-between text-sm text-gray-500">
            <span>å¤ä¹  ${model.reviewCount} æ¬¡</span>
            <span>${formatDate(model.lastReviewed)}</span>
          </div>
        </div>
      `).join('');
    }

    // æ‰“å¼€æ·»åŠ æ¨¡æ€æ¡†
    function openAddModal() {
      document.getElementById('modalTitle').textContent = 'æ·»åŠ æ€ç»´æ¨¡å‹';
      document.getElementById('submitBtnText').textContent = 'ä¿å­˜';
      document.getElementById('modelForm').reset();
      openModal();
    }

    // æŸ¥çœ‹æ¨¡å‹è¯¦æƒ…
    function viewModel(id) {
      const model = mindModels.find(m => m.id === id);
      if (!model) return;
      
      alert(`æŸ¥çœ‹æ¨¡å‹: ${model.title}\n\n${model.content}`);
    }

    // åˆ‡æ¢æ”¶è—çŠ¶æ€
    function toggleFavorite(id) {
      const model = mindModels.find(m => m.id === id);
      if (model) {
        model.isFavorite = !model.isFavorite;
        renderCards();
        updateStats();
      }
    }

    // å¤„ç†è¡¨å•æäº¤
    function handleFormSubmit(e) {
      e.preventDefault();
      
      const formData = {
        title: document.getElementById('modelTitle').value.trim(),
        description: document.getElementById('modelDescription').value.trim(),
        category: document.getElementById('modelCategory').value,
        difficulty: parseInt(document.getElementById('modelDifficulty').value),
        tags: document.getElementById('modelTags').value.split(',').map(tag => tag.trim()).filter(tag => tag),
        content: document.getElementById('modelContent').value.trim()
      };
      
      if (!formData.title || !formData.content) {
        alert('è¯·å¡«å†™å¿…å¡«å­—æ®µ');
        return;
      }
      
      // æ·»åŠ æ–°æ¨¡å‹
      const newModel = {
        id: Date.now().toString(),
        ...formData,
        isFavorite: false,
        lastReviewed: new Date().toISOString().split('T')[0],
        reviewCount: 0
      };
      mindModels.unshift(newModel);
      
      renderCards();
      updateStats();
      closeModal();
      alert('æ¨¡å‹æ·»åŠ æˆåŠŸï¼');
    }

    // æ›´æ–°ç»Ÿè®¡ä¿¡æ¯
    function updateStats() {
      document.getElementById('totalCount').textContent = mindModels.length;
      document.getElementById('favoriteCount').textContent = mindModels.filter(m => m.isFavorite).length;
      document.getElementById('reviewCount').textContent = mindModels.filter(m => {
        const lastReview = new Date(m.lastReviewed);
        const daysSinceReview = (new Date() - lastReview) / (1000 * 60 * 60 * 24);
        return daysSinceReview > 7;
      }).length;
    }

    // æ‰“å¼€æ¨¡æ€æ¡†
    function openModal() {
      document.getElementById('modelModal').classList.add('show');
      document.body.style.overflow = 'hidden';
    }

    // å…³é—­æ¨¡æ€æ¡†
    function closeModal() {
      document.getElementById('modelModal').classList.remove('show');
      document.body.style.overflow = 'auto';
    }

    // æ ¼å¼åŒ–æ—¥æœŸ
    function formatDate(dateString) {
      const date = new Date(dateString);
      const now = new Date();
      const diffTime = Math.abs(now - date);
      const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
      
      if (diffDays === 1) return 'ä»Šå¤©';
      if (diffDays === 2) return 'æ˜¨å¤©';
      if (diffDays <= 7) return `${diffDays - 1}å¤©å‰`;
      
      return date.toLocaleDateString('zh-CN');
    }
  </script>
</body>
</html>
