<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æ–°é—»å¡ç‰‡ç”Ÿæˆå™¨</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
body { font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif; background:#f5f5f7; color:#1d1d1f; }
.card { background:#fff; border-radius:16px; box-shadow:0 4px 20px rgba(0,0,0,0.05); padding:16px; display:flex; flex-direction:column; gap:12px; transition:transform 0.2s,box-shadow 0.2s; cursor:pointer; }
.card:hover { transform:translateY(-2px); box-shadow:0 8px 24px rgba(0,0,0,0.1); }
.card-header { font-weight:700; font-size:1.25rem; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #e5e5ea; padding-bottom:6px; }
.card-subtitle { color:#6e6e73; font-size:0.875rem; }
.card-section { padding:8px; border-radius:12px; background:#f2f2f7; display:none; flex-direction:column; gap:6px; }
.card-section h3 { font-weight:600; margin-bottom:4px; }
.card-core div { padding-left:8px; }
.card-footer { font-size:0.875rem; color:#6e6e73; display:flex; justify-content:space-between; border-top:1px solid #e5e5ea; padding-top:6px; }
textarea,input { width:100%; border:1px solid #d1d1d6; border-radius:8px; padding:8px; }
label { font-weight:600; }
.section { margin-bottom:24px; padding:16px; background:#fff; border-radius:16px; box-shadow:0 4px 20px rgba(0,0,0,0.05); }
button { transition:0.2s; }
button:hover { opacity:0.85; }
#searchInput { margin-bottom:16px; padding:8px; border:1px solid #d1d1d6; border-radius:8px; width:100%; }
</style>
</head>
<body class="p-8">
<h1 class="text-3xl font-bold mb-8">æ–°é—»å¡ç‰‡ç”Ÿæˆå™¨</h1>

<!-- æœç´¢æ¡† -->
<input id="searchInput" type="text" placeholder="æœç´¢å¡ç‰‡..." oninput="filterCards()">

<!-- æ–‡æœ¬è¾“å…¥åŒº -->
<div class="section">
<h2 class="text-xl font-bold mb-4">æ‰¹é‡æ–‡æœ¬è¾“å…¥ï¼ˆæ—§ç‰ˆå…¼å®¹ï¼‰</h2>
<textarea id="bulkInput" rows="6" placeholder="æ¯æ¡æ–°é—»æ¢è¡Œ"></textarea>
<button onclick="parseTextNews()" class="mt-4 px-4 py-2 bg-black text-white rounded-lg">ç”Ÿæˆæ–‡æœ¬å¡ç‰‡</button>
</div>

<!-- JSON è¾“å…¥åŒº -->
<div class="section">
<h2 class="text-xl font-bold mb-4">JSON è¾“å…¥ï¼ˆæ–°ç‰ˆæ¨èï¼‰</h2>
<textarea id="jsonInput" rows="8" placeholder="ç²˜è´´æ–°é—» JSON æ•°ç»„ï¼Œæ¯æ¡æ–°é—»åŒ…å« title, subtitle, summary, core, impact, nextStep, tags, source"></textarea>
<button onclick="parseJSONNews()" class="mt-4 px-4 py-2 bg-black text-white rounded-lg">ç”Ÿæˆ JSON å¡ç‰‡</button>
</div>

<!-- å¡ç‰‡å®¹å™¨ -->
<div id="cardsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-8"></div>

<script>
// æ·»åŠ å•æ¡å¡ç‰‡
function addCardFromData(data){
  const card=document.createElement('div');
  card.className='card';
  card.innerHTML=`
    <div class="card-header">
      <span>${data.title}</span>
      <span class="card-subtitle">${data.subtitle}</span>
    </div>

    <div class="card-section card-summary" style="display:block;">
      <h3>æ‘˜è¦</h3>
      <p>${data.summary}</p>
    </div>

    <div class="card-section card-core">
      <h3>æ ¸å¿ƒä¿¡æ¯</h3>
      ${data.core.map(i=>`<div>â€¢ ${i}</div>`).join('')}
    </div>

    <div class="card-section card-impact">
      <h3>å½±å“</h3>
      <p>${data.impact}</p>
    </div>

    <div class="card-section card-next">
      <h3>ä¸‹ä¸€æ­¥</h3>
      <p>${data.nextStep}</p>
    </div>

    <div class="card-footer">
      <span>${data.tags}</span>
      <span>æ¥æºï¼š${data.source}</span>
    </div>
  `;
  // ç‚¹å‡»æŠ˜å /å±•å¼€
  card.querySelector('.card-header').addEventListener('click',()=>{
    const sections=card.querySelectorAll('.card-section:not(.card-summary)');
    sections.forEach(sec=>{
      sec.style.display=sec.style.display==='flex'?'none':'flex';
    });
  });
  document.getElementById('cardsContainer').prepend(card);
}

// JSON è¾“å…¥è§£æ
function parseJSONNews(){
  const input=document.getElementById('jsonInput').value;
  if(!input) return alert('è¯·è¾“å…¥ JSON æ•°æ®');
  let dataArray=[];
  try { dataArray=JSON.parse(input); } catch(e){ return alert('JSON æ ¼å¼é”™è¯¯'); }
  dataArray.forEach(item=>addCardFromData(item));
  document.getElementById('jsonInput').value='';
}

// æ–‡æœ¬è¾“å…¥è§£æï¼ˆæ—§ç‰ˆå…¼å®¹ï¼‰
function parseTextNews(){
  const text=document.getElementById('bulkInput').value;
  if(!text) return alert('è¯·è¾“å…¥æ–‡æœ¬æ•°æ®');
  const items=text.split(/\n/).map(t=>t.trim()).filter(Boolean);

  items.forEach(news=>{
    let emoji='ğŸ“¢';
    const lower=news.toLowerCase();
    if(/æ¶¨|ä¸Šæ¶¨|åˆ›æ–°é«˜/.test(news)) emoji='ğŸ“ˆ';
    else if(/è·Œ|ä¸‹æ»‘|äºæŸ|å±æœº/.test(news)) emoji='âš ï¸';
    else if(/ai|ç§‘æŠ€|chip|åŠå¯¼ä½“/.test(lower)) emoji='ğŸ¤–';
    else if(/ç¾ä¿„|å…¨çƒ|international|world/.test(lower)) emoji='ğŸŒ';

    let core=news.match(/([A-Z][a-zA-Z0-9]*|[0-9]+%?|[\u4e00-\u9fa5]{2,10}[å…¬å¸è‚¡æŒ‡])/g)||[];
    core=core.slice(0,3);

    const titleText=news.replace(/\n/g,'').slice(0,12);
    const data={
      title:`${emoji} ${titleText}...`,
      subtitle:'ç¾è‚¡ Â· ä»Šæ—¥',
      summary:news,
      core:core.length?core:news.split(/[,.ï¼Œã€‚;]/).filter(s=>s.length>5).slice(0,3),
      impact:'å¸‚åœºå…³æ³¨ï¼ŒæŠ•èµ„è€…éœ€ç•™æ„é£é™©',
      nextStep:'å…³æ³¨åç»­æ•°æ®åŠå…¬å¸åŠ¨æ€',
      tags:'#ç¾è‚¡ #è´¢ç»',
      source:'æ¥æºæœªçŸ¥'
    };
    addCardFromData(data);
  });
  document.getElementById('bulkInput').value='';
}

// æœç´¢è¿‡æ»¤
function filterCards(){
  const query=document.getElementById('searchInput').value.toLowerCase();
  document.querySelectorAll('#cardsContainer .card').forEach(card=>{
    const text=card.innerText.toLowerCase();
    card.style.display=text.includes(query)?'flex':'none';
  });
}
</script>
</body>
</html>
